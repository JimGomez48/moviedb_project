{% extends 'base.html' %}
{% load staticfiles %}
{% block main_block %}
    <div class="container">
        <h1>{{ page_header }}</h1>

        <div class="panel panel-default text-left">
            <div class="panel-heading">
                <h2 class="text-primary">{{ movie.title }}</h2>
            </div>
            <div class="list-group">
                <div class="list-group-item">
                    <div class="media">
                        <div class="media-left media-top">
                            <img class="media-object" src="{% static 'img/default_movie.png' %}">
                        </div>
                        <div class="media-body">
                            <dl class="dl-horizontal">
                                <dt>Year</dt>
                                <dd>{{ movie.year }}</dd>
                                <dt>Company</dt>
                                <dd>{{ movie.company }}</dd>
                                <dt>MPAA Rating</dt>
                                <dd>{{ movie.rating }}</dd>
{#                                <dd><img src="{% static 'img/mpaa-icon_g.svg.png' %}" width="18"></dd>#}
                                <dt>Genres</dt>
                                {% for genre in genres %}
                                    <dd>{{ genre }}</dd>
                                {% endfor %}
                                <dt>Avg. User Rating</dt>
                                {% if avg_user_rating %}
                                    <dd>{{ avg_user_rating }}</dd>
                                {% else %}
                                    <dd>This movie has not yet been reviewed
                                    </dd>
                                {% endif %}
                            </dl>
                        </div>
                    </div>
                </div>

                <div class="list-group-item">
                    <h3 class="list-group-item-heading text-capitalize">Directors</h3>
                    {% if directors %}
                        {% for director in directors %}
                            <a href="{% url 'DirectorDetail' director.did.id %}">{{ director.did.get_full_name }}</a>
                        {% endfor %}
                    {% else %}
                        <h4 class="text-muted"><em>No directors to display</em></h4>
                    {% endif %}
                </div>

                <div class="list-group-item">
                    <h3 class="list-group-item-heading text-capitalize">Cast</h3>
                    {% if actors %}
                        {% for actor in actors %}
                            <a href="{% url 'ActorDetail' actor.aid.id %}">{{ actor.aid.get_full_name }}</a> as {{ actor.role }}
                            </br>
                        {% endfor %}
                    {% else %}
                        <h4 class="text-muted"><em>No cast to display</em></h4>
                    {% endif %}
                </div>

                <div class="list-group-item">
                    <h3 class="list-group-item-heading text-capitalize">Reviews</h3>
                    <div class="row">
                        <div class="col-lg-12">
                            {% if reviews %}
                                <div class="list-group">
                                    {% for review in reviews %}
                                        <div class="list-group-item">
                                            <div class="media">
                                                <div class="media-left media-top">
                                                    <img class="media-object"
                                                         width="56"
                                                         src="{% static 'img/default_person.png' %}">
                                                </div>
                                                <div class="media-body">
                                                    <h4 class="media-heading text-primary text-capitalize">{{ review.user_name }}</h4>
                                                    <small>{{ review.time }}</small>
                                                    </br>
                                                    <strong>Rating: </strong>{{ review.rating }}
                                                </div>
                                            </div>
                                            <div>
                                                <h5>{{ review.comment }}</h5>
                                            </div>
                                        </div>
                                    {% endfor %}
                                </div>
                            {% else %}
                                <h4 class="text-muted"><em>No Reviews To display</em></h4>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
{% endblock %}